{% extends "base.html" %}

{% block title %}Home{% endblock %}
{% block main %}

<div class="container">
    <form class="d-flex" role="search" style="width: 70%" action="/stations/search" method="GET">
        <input class="form-control me-2" type="search" placeholder="Search stations" name="q">
        <button class="btn btn-outline-success" type="submit" style="width: 30%">Search</button>
    </form>
    <div class="row">
        <div class="col">
            <h1>Bike Stations</h1>
            <hr>
            <div class="container">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th scope="col">ID</th>
                            <th scope="col">Nimi</th>
                            <th scope="col">Namn</th>
                            <th scope="col">Osoite</th>
                            <th scope="col">Adress</th>
                            <th scope="col">Kaupunki</th>
                            <th scope="col">Kapasiteetti</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for station in stationlist %}
                        <tr>
                            {% for i in range(station | length) %}

                            {% if i == 0 %}
                            <th scope="row"><a href="station/{{station[i]}}" }}>{{ station[i] }}</a></th>

                            {% else %}
                            <td>{{ station[i] }}</td>

                            {% endif %}
                            {% endfor %}
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                <hr>
            </div>
            {{ pagination.links }}
        </div>
    </div>
</div>
{% endblock %}

<!-- {% block script %}

<script>

    function search_stations() {
        console.log('inside function search stations');
        let phrase = document.getElementById('searchPhrase');

        fetch(`${window.origin}/stations/search`, {
            method: "POST",
            body: JSON.stringify(phrase.value),
            cache: "no-cache",
            headers: new Headers({
                "content-type": "application/json"
            })
        })
        .then((response) =>{
            if (response.status !== 200) {
                    console.log(`Response status wasn't 200: ${response.status}`);
                    return;
                }

                response.json().then((data) =>{
                    console.log(data);
                })
        })
        
    }

</script>

{% endblock %} -->